

$.bez = function(arr){
  var x1 = arr[0], y1 = arr[1], x2 = arr[2], y2 = arr[3],
    Cx = 3 * x1,
    Bx = 3 * (x2 - x1) - Cx,
    Ax = 1 - Cx - Bx,    
    Cy = 3 * y1,
    By = 3 * (y2 - y1) - Cy,
    Ay = 1 - Cy - By;   
    
  function bezier_x(t) {
    return t * (Cx + t * (Bx + t * Ax));
  }
   
  function bezier_y(t) {
    return t * (Cy + t * (By + t * Ay));
  }

  function bezier_x_der(t) {
    return Cx + t * (2*Bx + t * 3*Ax);
  }
  function find_x_for(t) {
    var x = t, i = 0, z;
   
    while (i < 5) {
      z = bezier_x(x) - t;
      if (Math.abs(z) < 1e-3) break;
   
      x = x - z / bezier_x_der(x);
      i++;
    }
     
    return x;
  }
  
  return function(t){
    return bezier_y(find_x_for(t));
  }
}